<!doctype html>
<html lang="tr">
<head>
  <link rel="stylesheet" href="style.css">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HocAlm â€” Ã–ÄŸrenme Stili Testi</title>
<meta name="description" content="Seviyene gÃ¶re 10 soruluk Ã¶ÄŸrenme stili testi. Ã‡ocuk dostu dil, 5 ÅŸÄ±k.">
<style>
  /* ====== Seviye SeÃ§im Overlay ====== */
  .level-overlay{position:fixed;inset:0;background:rgba(255,255,255,.95);display:flex;align-items:center;justify-content:center;z-index:999}
  .level-box{background:#fff;border-radius:20px;padding:32px 40px;box-shadow:0 10px 30px rgba(0,0,0,.08);max-width:420px;width:92%;text-align:center}
  .level-box h2{margin:0 0 8px}
  .level-box p{color:#555;margin:0 0 18px}
  .level-options{display:flex;flex-direction:column;gap:10px}
  .level-options button{border:2px solid #16a34a;background:#fff;color:#16a34a;font-weight:800;border-radius:12px;padding:12px;cursor:pointer;transition:.2s}
  .level-options button:hover{background:#16a34a;color:#fff;transform:scale(1.02)}

  /* ====== Tema ====== */
  :root{--text:#0b1220;--muted:#475569;--border:#e5e7eb;--card:#fff;--ok:#16a34a;--bg:linear-gradient(180deg,#fffdf5 0%,#fff4d6 100%);--radius:18px;--shadow:0 10px 20px rgba(0,0,0,.05)}
  *{box-sizing:border-box}html,body{margin:0;padding:0}
  body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg);line-height:1.6}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);box-shadow:0 2px 10px rgba(0,0,0,.03);z-index:50}
  .nav{max-width:920px;margin:auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
  .brand{font-weight:900}

  main{width:100%;min-height:calc(100vh - 72px);display:flex;align-items:center;justify-content:center;padding:40px 0}
  .wrap{max-width:900px;width:100%;padding:20px;display:flex;justify-content:center}
  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:28px;width:100%;max-width:760px}

  .title{font-size:28px;font-weight:900;margin:0 0 6px}
  .muted{color:var(--muted)}
  .prog{height:8px;background:#f1f5f9;border-radius:999px;overflow:hidden;margin:12px 0 18px}
  .prog>span{display:block;height:100%;width:0;background:var(--ok);transition:width .3s ease}
  .qtext{font-size:18px;font-weight:800;margin:10px 0}
  .ops{display:grid;gap:10px}
  .op{border:1px solid var(--border);background:#fff;border-radius:14px;padding:14px 16px;cursor:pointer;transition:.2s;font-size:15px;text-align:left}
  .op:hover{border-color:var(--ok);background:#f0fdf4}
  .op.sel{background:#16a34a;color:#fff;border-color:#16a34a;box-shadow:0 0 0 2px #bbf7d0}
  .bar{display:flex;align-items:center;justify-content:space-between;margin-top:20px}
  .bar button{all:unset;display:inline-block;border-radius:10px;padding:10px 24px;font-weight:700;font-size:15px;cursor:pointer;transition:.2s;border:1.5px solid #0b1220;background:#fff;color:#0b1220}
  .bar button:hover{background:#0b1220;color:#fff;transform:translateY(-1px)}
  .bar button:disabled{opacity:.4;cursor:not-allowed;transform:none}
  .bar button.next{border-color:#16a34a;background:#16a34a;color:#fff}
  .bar button.next:hover{background:#15803d;border-color:#15803d}
  .error{display:none;color:#ef4444;font-size:14px;margin-top:8px}

  /* ====== SonuÃ§ gÃ¶rÃ¼nÃ¼mÃ¼ ====== */
  .result{display:none;margin-top:18px}
  .result h2{margin:10px 0 6px}
  .pill{display:inline-block;padding:6px 12px;background:#f0fdf4;border-radius:999px;border:1px solid #bbf7d0;font-size:13px;margin-right:6px}
  .tips{border-top:1px dashed var(--border);margin-top:14px;padding-top:10px;color:var(--muted)}
  .cta{margin-top:8px;display:inline-block;background:#16a34a;color:#fff;border:none;border-radius:12px;padding:14px 28px;font-weight:800;font-size:16px;cursor:pointer;transition:.2s;box-shadow:0 8px 20px rgba(22,163,74,.18)}
  .cta:hover{background:#15803d;transform:scale(1.03)}
  .cta:active{transform:scale(.98)}

  /* OrtalanmÄ±ÅŸ buton alanlarÄ± */
  .result .cta-wrap{display:flex;justify-content:center;margin-top:16px}
  .btn-row{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-top:12px}

  .btn{all:unset;display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 18px;border-radius:12px;font-weight:700;font-size:14px;cursor:pointer;transition:all .2s}
  .btn-outline{border:2px solid #0b1220;color:#0b1220;background:#fff}
  .btn-outline:hover{background:#0b1220;color:#fff}
  .btn-ghost{border:2px dashed #94a3b8;color:#475569;background:#fff}
  .btn-ghost:hover{border-color:#0b1220;color:#0b1220}

  @media (max-width:640px){
    .card{padding:20px}
    .title{font-size:22px}
    .op{font-size:14px;padding:12px}
    .btn{width:100%}
  }
</style>
</head>
<body>

<!-- Seviye seÃ§imi -->
<div id="levelSelect" class="level-overlay">
  <div class="level-box">
    <h2>ðŸŽ“ Hangi seviyedesin?</h2>
    <p>SeÃ§imine gÃ¶re sana Ã¶zel sorular hazÄ±rlayacaÄŸÄ±z ðŸ‘‡</p>
    <div class="level-options">
      <button data-level="ilkokul">Ä°lkokul</button>
      <button data-level="ortaokul">Ortaokul</button>
      <button data-level="lise">Lise</button>
      <button data-level="universite">Ãœniversite</button>
    </div>
  </div>
</div>

<header>
  <div class="nav">
    <div class="brand">ðŸ“˜ HocAlm</div>
    <a href="index.html" class="brand" style="font-weight:700">Ana Sayfa</a>
  </div>
</header>
<main>
  <div class="wrap">
    <section class="card" id="quiz">
      <h1 class="title">Ã–ÄŸrenme Stili Testi</h1>
      <p class="muted">10 soru â€¢ Her soruda <strong>1</strong> seÃ§enek iÅŸaretle. Sonunda Ã¶ÄŸrenme biÃ§imini ve iÅŸe yarar ipuÃ§larÄ±nÄ± gÃ¶rÃ¼rsÃ¼n.</p>
      <div class="prog"><span id="progBar"></span></div>

      <div class="qbox">
        <div class="muted" id="step"></div>
        <h3 class="qtext" id="qText"></h3>
        <div class="ops" id="ops"></div>
        <div class="error" id="err">LÃ¼tfen bir seÃ§enek iÅŸaretle.</div>
      </div>

      <div class="bar">
        <button id="prev">Geri</button>
        <div class="muted" id="progressHint" aria-live="polite"></div>
        <div>
          <button class="next" id="next">Ä°leri</button>
          <button class="next" id="finish" style="display:none">Bitir</button>
        </div>
      </div>

      <div class="result" id="resultBox">
        <h2 id="resultTitle"></h2>
        <div id="badges" style="margin-bottom:6px"></div>
        <p class="muted" id="resultExplain"></p>
        <div class="tips" id="tips"></div>

        <div class="cta-wrap">
          <button class="cta" id="ctaBtn">ðŸš€ Hadi baÅŸlayalÄ±m</button>
        </div>
        <div class="btn-row">
          <button class="btn btn-outline" id="restart">â†» BaÅŸtan Yap</button>
          <button class="btn btn-ghost" id="changeLevel">ðŸŽ“ Seviyeyi DeÄŸiÅŸtir</button>
        </div>
      </div>
    </section>
  </div>
</main>

<script>
/* ========== 1) Seviyeye gÃ¶re sade soru havuzlarÄ± ========== */
const LEVEL_QUESTIONS = {
  ilkokul: [
    { t:"Yeni bir ÅŸeyi Ã¶ÄŸrenirken en Ã§ok hangisini seversin?",
      a:[["Resimlere bakarÄ±m","V"],["AnlatÄ±lÄ±nca dinlerim","A"],["Kendim denerim","K"],["Yazarak Ã§alÄ±ÅŸÄ±rÄ±m","R"],["KÄ±sa video izlerim","S"]]},
    { t:"Ã–ÄŸretmen yeni konu anlattÄ±. En Ã§ok hangisi iÅŸine yarar?",
      a:[["Tahtadaki Ã§izimler","V"],["Sakince dinlemek","A"],["Deney yapmak","K"],["Deftere Ã¶zet yazmak","R"],["KÄ±sa bir video","S"]]},
    { t:"Yolunu karÄ±ÅŸtÄ±rdÄ±n. NasÄ±l bulursun?",
      a:[["Haritaya bakarÄ±m","V"],["Birine sorup dinlerim","A"],["EtrafÄ± gezip denerim","K"],["YazÄ±lÄ± tarifi okurum","R"],["KÄ±sa yol videosu izlerim","S"]]},
    { t:"Evde proje Ã¶devi var. Ä°lk ne yaparsÄ±n?",
      a:[["Resim/Ã§izimle plan yaparÄ±m","V"],["Ailemle konuÅŸurum","A"],["Malzemeleri kurcalarÄ±m","K"],["AdÄ±mlarÄ± yazarÄ±m","R"],["NasÄ±l yapÄ±lÄ±r videosu aÃ§arÄ±m","S"]]},
    { t:"Bir hikÃ¢yeyi en iyi nasÄ±l hatÄ±rlarsÄ±n?",
      a:[["Resimlerine bakarÄ±m","V"],["Dinlerim","A"],["Oyuncaklarla canlandÄ±rÄ±rÄ±m","K"],["Not alÄ±rÄ±m","R"],["KÄ±sa film izlerim","S"]]},
    { t:"Matematikte yeni bir yol Ã¶ÄŸrendin. NasÄ±l anlarsÄ±n?",
      a:[["Renkli ÅŸekillerle","V"],["AÃ§Ä±klamayÄ± dinleyerek","A"],["Somut parÃ§alarla deneyerek","K"],["AdÄ±mlarÄ± yazarak","R"],["AnlatÄ±mlÄ± video ile","S"]]},
    { t:"SÄ±nava hazÄ±rlanÄ±rken ne yaparsÄ±n?",
      a:[["Konu haritasÄ± Ã§izerim","V"],["ArkadaÅŸÄ±mla birbirimize anlatÄ±rÄ±z","A"],["UygulamalÄ± soru Ã§Ã¶zerim","K"],["Temiz not tutarÄ±m","R"],["KÄ±sa konu videolarÄ± izlerim","S"]]},
    { t:"Yeni bir oyunu Ã¶ÄŸrenirkenâ€¦",
      a:[["KurallarÄ± resimle gÃ¶rÃ¼rsem anlarÄ±m","V"],["Biri anlatÄ±rsa anlarÄ±m","A"],["Hemen oynayÄ±p denerim","K"],["KurallarÄ± okuyup denerim","R"],["Ã–ÄŸreten videoya bakarÄ±m","S"]]},
    { t:"BilmediÄŸin kelimeyi Ã¶ÄŸrenmek iÃ§inâ€¦",
      a:[["Resimli sÃ¶zlÃ¼ÄŸe bakarÄ±m","V"],["SÃ¶yleniÅŸini dinlerim","A"],["CÃ¼mlede kullanÄ±rÄ±m","K"],["AnlamÄ±nÄ± yazÄ±p tekrar ederim","R"],["KÄ±sa aÃ§Ä±klama videosu izlerim","S"]]},
    { t:"Ã–dev yaparken nasÄ±l motive olursun?",
      a:[["Renkli kalem/ÅŸemalar","V"],["Sessizce dinleyip Ã§alÄ±ÅŸmak","A"],["KÄ±sa hareketli molalar","K"],["YapÄ±lacaklar listesi","R"],["Ã–nce hÄ±zlÄ± bir video ile hatÄ±rlamak","S"]]}
  ],
  ortaokul: [
    { t:"Yeni bir konuyu en iyi nasÄ±l kavrarsÄ±n?",
      a:[["Åžema/infografik gÃ¶rmek","V"],["AÃ§Ä±klamayÄ± dinlemek","A"],["UygulamalÄ± Ã¶rnek Ã§Ã¶zmek","K"],["Kendi notumu Ã§Ä±karmak","R"],["KÄ±sa konu Ã¶zeti video","S"]]},
    { t:"Fen dersinde anlatÄ±m tercihin?",
      a:[["Deney adÄ±mlarÄ±nÄ±n Ã§izimi","V"],["Ã–ÄŸretmeni dikkatle dinlemek","A"],["Laboratuvarda deney yapmak","K"],["Defterde Ã¶zetlemek","R"],["Deney videosu izlemek","S"]]},
    { t:"Tarih Ã§alÄ±ÅŸÄ±rken seni ne hÄ±zlandÄ±rÄ±r?",
      a:[["Zaman Ã§izelgesi","V"],["Sohbetle tartÄ±ÅŸma","A"],["Harita/nesne Ã¼zerinde gÃ¶stermek","K"],["Kronolojik not","R"],["Belgesel parÃ§asÄ±","S"]]},
    { t:"Matematikte yeni kavramâ€¦",
      a:[["GÃ¶rsel model","V"],["SÃ¶zlÃ¼ anlatÄ±m","A"],["Somut materyal denemek","K"],["FormÃ¼l defteri","R"],["KÄ±sa Ã¶zet video","S"]]},
    { t:"Dil Ã¶ÄŸrenirkenâ€¦",
      a:[["Resimli kartlar","V"],["Dinlemeâ€“tekrar","A"],["Diyalog canlandÄ±rma","K"],["Kelime defteri","R"],["KÄ±sa diyalog videosu","S"]]},
    { t:"CoÄŸrafyadaâ€¦",
      a:[["Harita/ÅŸema","V"],["Ders anlatÄ±mÄ±","A"],["Maketi incelemek","K"],["Ã–zet Ã§Ä±karma","R"],["Belgesel kesiti","S"]]},
    { t:"TÃ¼rkÃ§e paragrafa yaklaÅŸÄ±mÄ±n?",
      a:[["Åžematik Ã¶zet","V"],["Sesli okuma","A"],["Drama/oyunlaÅŸtÄ±rma","K"],["AltÄ±nÄ± Ã§izerek okuma","R"],["Ã–zet video","S"]]},
    { t:"Kodlama Ã¶ÄŸrenirkenâ€¦",
      a:[["AkÄ±ÅŸ diyagramÄ±","V"],["AdÄ±m adÄ±m anlatÄ±m","A"],["Hemen deneyip gÃ¶rmek","K"],["AdÄ±m listesini yazmak","R"],["KÄ±sa demo video","S"]]},
    { t:"SÄ±nav kampÄ±ndaâ€¦",
      a:[["Konu haritasÄ±","V"],["Soru Ã§Ã¶zÃ¼mÃ¼ dinlemek","A"],["ZamanlÄ± deneme","K"],["Planâ€“takvim","R"],["GÃ¼n sonu Ã¶zet videosu","S"]]},
    { t:"Motivasyon iÃ§inâ€¦",
      a:[["Renkli hedef panosu","V"],["KoÃ§la konuÅŸmak","A"],["KÄ±sa sporâ€“mola","K"],["YapÄ±lacaklar listesi","R"],["Ä°lham videosu","S"]]}
  ],
  lise: [
    { t:"Yeni bir kavramÄ± en hÄ±zlÄ± nasÄ±l anlarsÄ±n?",
      a:[["GÃ¶rsel ÅŸema/Ã¶rneklerle","V"],["Konu anlatÄ±mÄ±nÄ± dinleyerek","A"],["Uygulama/problem Ã§Ã¶zerek","K"],["Not alÄ±p Ã¶zetleyerek","R"],["KÄ±sa derleme video ile","S"]]},
    { t:"Fizikte formÃ¼l Ã¶ÄŸrenirkenâ€¦",
      a:[["Grafik/vektÃ¶r diyagramÄ±","V"],["SÃ¶zlÃ¼ aÃ§Ä±klama","A"],["Deney/simÃ¼lasyon","K"],["TÃ¼mdengelimsel not","R"],["SimÃ¼lasyon videosu","S"]]},
    { t:"Kimya tepkimeleriâ€¦",
      a:[["Åžematik tablo","V"],["Ders anlatÄ±mÄ±","A"],["Lab deneyi","K"],["Tepkime notlarÄ±","R"],["Deney videosu","S"]]},
    { t:"Matematikte limit/ tÃ¼revâ€¦",
      a:[["Grafik Ã¼zerinden","V"],["Teoriyi dinleyerek","A"],["Soru Ã¼zerinde deneme","K"],["TanÄ±mâ€“teorem yazmak","R"],["KÄ±sa konu Ã¶zeti video","S"]]},
    { t:"Biyoloji sistemleriâ€¦",
      a:[["Organ ÅŸemalarÄ±","V"],["AnlatÄ±m dinlemek","A"],["Modelleme","K"],["Kavram haritasÄ± yazmak","R"],["Mikro video","S"]]},
    { t:"Edebiyat akÄ±mlarÄ±â€¦",
      a:[["Zihin haritasÄ±","V"],["Sohbet anlatÄ±m","A"],["Rol canlandÄ±rma","K"],["KarÅŸÄ±laÅŸtÄ±rmalÄ± not","R"],["Ã–zet video","S"]]},
    { t:"Geometri Ã§alÄ±ÅŸÄ±rkenâ€¦",
      a:[["Ã‡izimâ€“gÃ¶rsel","V"],["Ã‡Ã¶zÃ¼m anlatÄ±mÄ±nÄ± dinleme","A"],["Dinamik geometri ile deneme","K"],["FormÃ¼l kartlarÄ±","R"],["KÄ±sa Ã§Ã¶zÃ¼m videolarÄ±","S"]]},
    { t:"Programlama Ã¶ÄŸrenirkenâ€¦",
      a:[["AkÄ±ÅŸ diyagramÄ±","V"],["Mentor anlatÄ±mÄ±","A"],["Kod yazarak deneme","K"],["Pseudo-code","R"],["Walkthrough video","S"]]},
    { t:"Planâ€“disiplinâ€¦",
      a:[["Gantt/kanban gÃ¶rseli","V"],["KoÃ§ konuÅŸmasÄ±","A"],["Zaman kutulama","K"],["Takvimâ€“to-do","R"],["GÃ¼n sonu rapor video","S"]]},
    { t:"SÄ±nav stratejiâ€¦",
      a:[["Hata defteri gÃ¶rselleÅŸtirme","V"],["Soru Ã§Ã¶zÃ¼mÃ¼ dinleme","A"],["Deneme analiziâ€“deneyim","K"],["Ã–zetâ€“formÃ¼l defteri","R"],["Teknik video","S"]]}
  ],
  universite: [
    { t:"Akademik bir konuyu Ã§alÄ±ÅŸÄ±rken en verimli yolun?",
      a:[["Åžekil/tablolarÄ± incelemek","V"],["Seminer/lecture dinlemek","A"],["Prototip/uygulama yapmak","K"],["Ã–zetâ€“not Ã§Ä±karmak","R"],["KÄ±sa konferans videosu izlemek","S"]]},
    { t:"Algoritma Ã¶ÄŸrenirkenâ€¦",
      a:[["AkÄ±ÅŸ ÅŸemasÄ±/gÃ¶rselleÅŸtirme","V"],["Ders anlatÄ±mÄ±","A"],["KodlayÄ±p benchmark denemek","K"],["Matematiksel not/pseudo","R"],["Lecture snippet","S"]]},
    { t:"Ä°statistik/olasÄ±lÄ±k Ã§alÄ±ÅŸÄ±rkenâ€¦",
      a:[["Grafikâ€“daÄŸÄ±lÄ±m gÃ¶rselleri","V"],["Teori anlatÄ±mÄ±nÄ± dinlemek","A"],["R/Python ile deney","K"],["FormÃ¼lâ€“Ã¶zet yazmak","R"],["Explainer video","S"]]},
    { t:"MÃ¼hendislik tasarÄ±mÄ±ndaâ€¦",
      a:[["CAD/ÅŸema","V"],["SÃ¶zlÃ¼ review/feedback","A"],["Prototipleme","K"],["Specification yazmak","R"],["Demo video","S"]]},
    { t:"Akademik Ä°ngilizceâ€¦",
      a:[["Vocab mind-map","V"],["Podcast/lecture dinlemek","A"],["Speaking pratiÄŸi","K"],["Akademik notlar","R"],["Short lecture video","S"]]},
    { t:"Sunum hazÄ±rlarkenâ€¦",
      a:[["Slide gÃ¶rselleÅŸtirme","V"],["Provaâ€“sesli tekrar","A"],["Dry-run","K"],["Script yazmak","R"],["Ã–rnek sunum izlemek","S"]]},
    { t:"AraÅŸtÄ±rma planÄ± yaparkenâ€¦",
      a:[["Roadmap/diyagram","V"],["DanÄ±ÅŸman gÃ¶rÃ¼ÅŸmesi","A"],["KÃ¼Ã§Ã¼k deneyler","K"],["Plan dokÃ¼manÄ±","R"],["Seminar video","S"]]},
    { t:"Veri bilimi Ã¶ÄŸrenirkenâ€¦",
      a:[["Pipeline diyagramÄ±","V"],["AnlatÄ±m dinlemek","A"],["Notebook ile denemek","K"],["Notebook notlarÄ±","R"],["Walkthrough video","S"]]},
    { t:"Zaman yÃ¶netimiâ€¦",
      a:[["Kanbanâ€“Gantt","V"],["KoÃ§/mentor gÃ¶rÃ¼ÅŸmesi","A"],["Pomodoro disiplini","K"],["Takvimâ€“OKR notlarÄ±","R"],["Productivity talks","S"]]},
    { t:"Motivasyonunu nasÄ±l diri tutarsÄ±n?",
      a:[["GÃ¶rsel hedef panosu","V"],["KoÃ§/peer feedback","A"],["KÄ±sa sporâ€“mola","K"],["GÃ¼nlÃ¼k yapÄ±lacaklar","R"],["Ä°lham konuÅŸmalarÄ±","S"]]}
  ]
};

/* ========== 2) Etiketler / aÃ§Ä±klamalar / ipuÃ§larÄ± ========== */
const LABELS = { V:"GÃ¶rsel", A:"Ä°ÅŸitsel", K:"Yaparak", R:"Yazarak", S:"Ä°zleyerek" };
const EXPLAINS = {
  V:"Resimler, renkler ve ÅŸekiller sana gÃ¼Ã§ verir. Åžema ve Ã§izimlerle Ã§ok hÄ±zlÄ± Ã¶ÄŸrenirsin.",
  A:"KonuÅŸarak ve dinleyerek daha iyi Ã¶ÄŸrenirsin. AnlatÄ±nca aklÄ±nda kalÄ±r.",
  K:"Hareket ederek, deneyip yaparak Ã¶ÄŸrenirsin. Ellerini kullanÄ±nca konu canlanÄ±r.",
  R:"Yazarak ve okuyarak iyi Ã¶ÄŸrenirsin. Temiz notlar senin sÃ¼per gÃ¼cÃ¼n.",
  S:"KÄ±sa videolar ve hikÃ¢yeler hoÅŸuna gider. Ä°zleyince konuyu hemen yakalarsÄ±n."
};
const TIPS = {
  V:["Konu Ã¶zetini renklerle ÅŸemalaÅŸtÄ±r.","Kartlara kÃ¼Ã§Ã¼k Ã§izimler ekle.","Videoda Ã¶nemli kareyi dondur."],
  A:["Konuyu yÃ¼ksek sesle anlat.","Ses kaydÄ± al, geri dinle.","ArkadaÅŸÄ±nla soru-cevap yap."],
  K:["KÄ±sa deneyler yap.","25 dk Ã§alÄ±ÅŸ + 5 dk hareketli mola.","Somut nesneler kullan."],
  R:["KÄ±sa Ã¶zet listeleri yaz.","BaÅŸlÄ±klarÄ± kalÄ±n yap.","OkuduÄŸunu kendi cÃ¼mlenle yaz."],
  S:["1-2 dakikalÄ±k videolarla baÅŸla.","3 kelimeyle not al.","Gerekirse 1.25x hÄ±z dene."]
};

/* ========== 3) DOM referanslarÄ± ve durum ========== */
const $ = s => document.querySelector(s);
const ops = $("#ops"), qText=$("#qText"), step=$("#step"),
      progBar=$("#progBar"), progressHint=$("#progressHint"),
      prevBtn=$("#prev"), nextBtn=$("#next"), finishBtn=$("#finish"),
      err=$("#err"), resultBox=$("#resultBox"), resultTitle=$("#resultTitle"),
      badges=$("#badges"), resultExplain=$("#resultExplain"), tipsEl=$("#tips"),
      restart=$("#restart"), ctaBtn=$("#ctaBtn"),
      levelOverlay = document.getElementById('levelSelect');

let QUESTIONS = [];
let idx = 0;
let answers = [];
const score = {V:0,A:0,K:0,R:0,S:0};

/* ========== 4) Render ========== */
function render(){
  if (QUESTIONS.length === 0) {
    qText.textContent = "";
    ops.innerHTML = "";
    progressHint.textContent = "";
    progBar.style.width = "0%";
    nextBtn.disabled = true; finishBtn.disabled = true; prevBtn.disabled = true;
    return;
  }
  nextBtn.disabled = false; finishBtn.disabled = false; prevBtn.disabled = false;

  const percent = Math.round((idx)/QUESTIONS.length*100);
  progBar.style.width = percent + "%";
  progressHint.textContent = `${idx+1}/${QUESTIONS.length}`;

  prevBtn.disabled = idx===0;
  nextBtn.style.display = (idx < QUESTIONS.length-1) ? "inline-block" : "none";
  finishBtn.style.display = (idx === QUESTIONS.length-1) ? "inline-block" : "none";

  const q = QUESTIONS[idx];
  step.textContent = `Soru ${idx+1} / ${QUESTIONS.length}`;
  qText.textContent = q.t;

  ops.innerHTML = "";
  q.a.forEach(([label,type],i)=>{
    const b = document.createElement("button");
    b.className = "op"; b.type = "button"; b.textContent = label;
    if(answers[idx]?.type === type) b.classList.add("sel");
    b.onclick = ()=>{
      answers[idx] = {i,type};
      [...ops.children].forEach(x=>x.classList.remove("sel"));
      b.classList.add("sel");
      err.style.display = "none";
    };
    ops.appendChild(b);
  });
}
function requireAnswer(){ if(!answers[idx]){ err.style.display="block"; return false; } return true; }

/* ========== 5) Navigation ========== */
prevBtn.onclick = ()=>{ if(idx>0){ idx--; err.style.display="none"; render(); } };
nextBtn.onclick = ()=>{ if(!requireAnswer()) return; if(idx<QUESTIONS.length-1){ idx++; render(); } };
finishBtn.onclick = ()=>{
  progBar.style.width = "100%";
  progressHint.textContent = `${QUESTIONS.length}/${QUESTIONS.length}`;
  if(!requireAnswer()) return;

  for(const k in score) score[k]=0;
  answers.forEach(a=> score[a.type]++);
  const ordered = Object.entries(score).sort((a,b)=>b[1]-a[1]);
  const [topType] = ordered[0];

  badges.innerHTML = ordered.map(([t,v])=>`<span class="pill">${LABELS[t]}: ${v}</span>`).join(" ");
  resultTitle.textContent = `Harika! BaskÄ±n Ã¶ÄŸrenme biÃ§imin: ${LABELS[topType]} ðŸŽ¯`;
  resultExplain.textContent = EXPLAINS[topType];
  tipsEl.innerHTML = `<strong>Ä°ÅŸe yarar ipuÃ§larÄ±:</strong><ul>${TIPS[topType].map(x=>`<li>${x}</li>`).join("")}</ul>`;

  resultBox.style.display = "block";
  $("#quiz .qbox").style.display = "none";
  $(".bar").style.display = "none";

  ctaBtn.onclick = ()=> location.href = "index.html#pricing";

  /* ==== ANALÄ°ZÄ° TETÄ°KLE (tam burada!) ==== */

  // 1) Analizin basacaÄŸÄ± kÃ¶k
  const rr = document.createElement('div');
  rr.id = 'result-root';
  resultBox.appendChild(rr);

  // 2) ch.level + ch.testResults
  const levelFromYou = localStorage.getItem('hocamLevel') || 'lise';
  const finalAnswerCodes = answers.map(a => a?.type).filter(Boolean);
  localStorage.setItem('ch.level', levelFromYou);
  localStorage.setItem('ch.testResults', JSON.stringify(finalAnswerCodes));

  // 3) analysis.js'i sÄ±cak yÃ¼kle (cache-bust)
  (function(){
    const old = document.querySelector('script[data-ch-analysis]');
    if (old) old.remove();
    const s = document.createElement('script');
    s.src = 'assets/js/analysis.js?v=' + Date.now();
    s.setAttribute('data-ch-analysis','1');
    document.body.appendChild(s);
  })();
};

restart.onclick = ()=>{
  idx = 0; answers = Array(QUESTIONS.length).fill(null);
  for(const k in score) score[k]=0;
  $("#quiz .qbox").style.display = "block";
  $(".bar").style.display = "flex";
  resultBox.style.display = "none";
  resultBox.innerHTML = `
    <h2 id="resultTitle"></h2>
    <div id="badges" style="margin-bottom:6px"></div>
    <p class="muted" id="resultExplain"></p>
    <div class="tips" id="tips"></div>
    <div class="cta-wrap"><button class="cta" id="ctaBtn">ðŸš€ Hadi baÅŸlayalÄ±m</button></div>
    <div class="btn-row">
      <button class="btn btn-outline" id="restart">â†» BaÅŸtan Yap</button>
      <button class="btn btn-ghost" id="changeLevel">ðŸŽ“ Seviyeyi DeÄŸiÅŸtir</button>
    </div>`;
  // referanslarÄ± tazele
  window.location.reload(); // en temiz reset
};

/* ========== 6) Seviye seÃ§imi ========== */
document.querySelectorAll('.level-options button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const level = btn.dataset.level;
    localStorage.setItem('hocamLevel', level);
    startTest(level);
    levelOverlay.style.display = 'none';
  });
});
function startTest(level){
  QUESTIONS = LEVEL_QUESTIONS[level] || LEVEL_QUESTIONS.ilkokul;
  idx = 0;
  answers = Array(QUESTIONS.length).fill(null);
  render();
}

/* ========== 7) Otomatik baÅŸlat (kayÄ±t varsa) ========== */
const savedLevel = localStorage.getItem('hocamLevel');
if (savedLevel) {
  levelOverlay.style.display = 'none';
  startTest(savedLevel);
} else {
  render();
}

/* ========== 8) KÄ±sayollar ========== */
document.addEventListener("keydown",(e)=>{
  if(e.key>="1" && e.key<="5"){ const i=Number(e.key)-1; ops.children[i]?.click(); }
  else if(e.key==="ArrowRight"){ nextBtn.click(); }
  else if(e.key==="ArrowLeft"){ prevBtn.click(); }
});

/* ========== 9) Seviyeyi deÄŸiÅŸtir ========== */
document.getElementById('changeLevel').addEventListener('click', ()=>{
  localStorage.removeItem('hocamLevel');
  resultBox.style.display = "none";
  $("#quiz .qbox").style.display = "block";
  $(".bar").style.display = "flex";
  QUESTIONS = [];
  render();
  levelOverlay.style.display = 'flex';
});
</script>

<!-- analysis.js her zaman yÃ¼klensin; veri yoksa kendisi Ã§Ä±kÄ±yor -->
<script src="assets/js/analysis.js"></script>
</body>
</html>
